# Momentum Scanner Implementation Context

**Last Updated:** 2025-11-28
**Branch:** `claude/investigate-momentum-score-0157ryqaLg8ngtPcDeXsh8tY`

---

## Current Sprint: Phase 1 - Core Breakout Detection
## Active Ticket: TICKET-001 (Price Change Filters)

---

## Project Overview

Building a momentum scanner for day trading breakout detection in stocks under $10.
Uses Finviz Elite screeners + RVOL calculations + technical indicators.

## Key Files

### Core Scanner
- `src/catalyst_bot/scanner.py` - Main breakout scanner (MODIFY)
- `src/catalyst_bot/finviz_elite.py` - Finviz API wrapper (READ ONLY)
- `src/catalyst_bot/config.py` - Settings (MODIFY)

### Volume/Indicators
- `src/catalyst_bot/rvol.py` - RVOL calculations (READ ONLY)
- `src/catalyst_bot/indicator_utils.py` - Technical indicators (MODIFY)

### MOA Integration
- `src/catalyst_bot/rejected_items_logger.py` - Tracks rejected catalysts (READ ONLY)

### Market Hours
- `src/catalyst_bot/market_hours.py` - Time period detection (READ ONLY)
- `src/catalyst_bot/premarket_sentiment.py` - Pre-market detection (REFERENCE)
- `src/catalyst_bot/aftermarket_sentiment.py` - After-hours detection (REFERENCE)

### Alert System
- `src/catalyst_bot/alerts.py` - Discord alerts (MODIFY in Phase 3)
- `src/catalyst_bot/runner.py` - Main loop (MODIFY for continuous scanner)

---

## Implementation Progress

### Completed
- [x] Initial analysis and documentation
- [x] Action plan created (MOMENTUM_SCANNER_ACTION_PLAN.md)
- [x] Progress tracker created (MOMENTUM_SCANNER_PROGRESS.md)

### In Progress
- [ ] TICKET-001: Add price change filters to scanner.py

### Not Started
- [ ] TICKET-002: RSI integration
- [ ] TICKET-003: MOA priority queue
- [ ] TICKET-004: Pre-market scanner
- [ ] TICKET-005: After-hours scanner
- [ ] TICKET-006: Continuous scanner
- [ ] TICKET-007: Enhanced alerts
- [ ] TICKET-008: Rate limiting

---

## Technical Decisions

| Decision | Value | Rationale |
|----------|-------|-----------|
| RVOL threshold | 2.0x | Research-backed for day trading |
| Gap threshold | 4% | Significant pre-market move |
| Price ceiling | $10 | Small-cap focus |
| Price floor | $0.50 | Avoid illiquid penny stocks |
| MOA score boost | 1.3x | Second chance for rejected catalysts |
| Alert rate limit | 30 min | Prevent alert fatigue |

---

## Finviz Filter Reference

```
# Pre-market gap scan
f=sh_price_u10,sh_price_o0.5,sh_avgvol_o500,sh_relvol_o1.5,ta_gap_u4

# Intraday momentum scan
f=sh_price_u10,sh_price_o0.5,sh_avgvol_o500,sh_relvol_o2,ta_perf_do5

# Key filters:
ta_gap_u4    = Gap up > 4%
ta_perf_do5  = Day change > 5%
sh_relvol_o2 = Relative volume > 2x
```

---

## Testing Commands

```bash
# Run scanner tests
pytest tests/test_scanner.py -v

# Run all tests
pytest tests/ -v --cov=src/catalyst_bot

# Check syntax
python -m py_compile src/catalyst_bot/scanner.py
```

---

## Quick Start Commands

```bash
# Start working on TICKET-001
claude "Implement TICKET-001 from MOMENTUM_SCANNER_ACTION_PLAN.md - add price change filters to scanner.py"

# Continue from last session
claude --context .claude-context.md "Continue implementing the momentum scanner"

# Run specific ticket
claude "Implement TICKET-002 RSI integration per the action plan"
```

---

## Notes for AI Assistants

1. **Day Trading Focus:** All thresholds optimized for intraday moves, not swing trading
2. **Finviz Elite Required:** User has Elite access, use authenticated endpoints
3. **Config-Driven:** All thresholds should be configurable via environment variables
4. **Feature Flags:** New functionality behind `FEATURE_*` flags, default OFF
5. **MOA Integration:** Rejected catalysts get second chance with score boost
6. **Testing:** Mock Finviz API in tests to avoid rate limits

---

*This file is for maintaining context across AI coding sessions.*
*Update after completing each ticket.*
