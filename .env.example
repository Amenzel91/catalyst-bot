# =============================================================================
# Catalyst-Bot Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to git - it contains secrets!

# -----------------------------------------------------------------------------
# REQUIRED: Discord Integration
# -----------------------------------------------------------------------------
# Get webhook URL from Discord: Server Settings > Integrations > Webhooks > New Webhook
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_ID/YOUR_TOKEN

# Optional: Separate webhook for admin messages
#DISCORD_ADMIN_WEBHOOK=

# -----------------------------------------------------------------------------
# Classification & Filtering
# -----------------------------------------------------------------------------
# Minimum classification score threshold (0.0-10.0)
# Items below this score are filtered out
# Default: 0 (disabled) - Recommended: 0.2-0.5 for active filtering
MIN_SCORE=0.2

# Maximum stock price for alerts (USD)
# Stocks above this price are filtered out (watchlist bypass available)
# Default: 10.0 - Set to 0 to disable price ceiling
PRICE_CEILING=10.0

# Minimum stock price for alerts (USD)
# Stocks below this price are filtered out (avoids sub-penny stocks)
# Default: 0.10 - Set to 0 to disable price floor
PRICE_FLOOR=0.10

# Confidence threshold for high-confidence alerts (0.0-1.0)
# Used by admin controls to classify alert quality
# Default: 0.8 (80% confidence)
CONFIDENCE_HIGH=0.8

# Maximum number of alerts to send per cycle
# Prevents alert spam during high-volume periods
# Default: 40
MAX_ALERTS_PER_CYCLE=40

# Minimum absolute sentiment threshold (0.0-1.0)
# Items with |sentiment| below this are filtered out
# Default: 0 (disabled) - Recommended: 0.10 for sentiment-based filtering
#MIN_SENT_ABS=0.10

# -----------------------------------------------------------------------------
# Article Freshness (Prevent Stale News Alerts)
# -----------------------------------------------------------------------------
# Only alert on fresh news to catch price movements early.
# Regular news: 30 minutes (breaking news)
# SEC filings: 240 minutes / 4 hours (filings process slowly)

# Maximum age for regular articles (minutes)
# Articles older than this are rejected as stale
# Default: 30 minutes
MAX_ARTICLE_AGE_MINUTES=30

# Maximum age for SEC filings (minutes)
# SEC filings get a longer window because they process slowly through EDGAR
# Default: 240 minutes (4 hours)
MAX_SEC_FILING_AGE_MINUTES=240

# -----------------------------------------------------------------------------
# Ticker Extraction Settings
# -----------------------------------------------------------------------------
# Enable OTC ticker extraction (OTC, OTCMKTS, OTCQX, OTCQB exchanges)
# IMPORTANT: Enable this for penny stock bots that track OTC markets
# Default: 0 (disabled) - Set to 1 to enable OTC ticker extraction
ALLOW_OTC_TICKERS=1

# Allow dollar-prefixed tickers without exchange qualifier ($TSLA, $AAPL, etc.)
# When disabled, only exchange-qualified tickers are extracted (NYSE: TSLA)
# Default: 0 (disabled) - Set to 1 to enable loose $TICKER matching
#DOLLAR_TICKERS_REQUIRE_EXCHANGE=0

# -----------------------------------------------------------------------------
# OTC Stock Filter (WAVE 1.2)
# -----------------------------------------------------------------------------
# Filter out OTC/pink sheet stocks (illiquid, unsuitable for day trading).
# OTC (Over-The-Counter) stocks trade on OTCQB, OTCQX, or Pink Sheets.
# These are typically illiquid penny stocks with wide spreads, making them
# unsuitable for day trading alerts. This filter uses yfinance to check the
# exchange field and blocks stocks with OTC-related exchange codes.
#
# Examples blocked: MMTXU (OTC), RVLY (OTC)
# Examples allowed: AAPL (NASDAQ), TSLA (NASDAQ), SPY (NYSE)
#
# When enabled, the bot will:
# 1. Check each ticker's exchange via yfinance (cached for performance)
# 2. Reject tickers with exchange codes containing "OTC", "Pink", or "Other OTC"
# 3. Log rejections with reason "otc_exchange" for MOA analysis
# 4. Track rejection count in skipped_otc metric
#
# Enable/disable OTC filtering (1=enabled, 0=disabled)
# Default: 1 (enabled)
FILTER_OTC_STOCKS=1

# -----------------------------------------------------------------------------
# WAVE 3: Multi-Ticker Article Handling
# -----------------------------------------------------------------------------
# Intelligently handle news articles that mention multiple tickers.
# Previously, ALL multi-ticker articles were rejected (false negatives).
# Now, articles are scored to determine primary vs. secondary mentions.
#
# PROBLEM SOLVED:
# - "AAPL down 5%, MSFT up 2%" ‚Üí Previously sent to both tickers (false positive)
# - "AAPL and GOOGL Announce Partnership" ‚Üí Previously rejected entirely (false negative)
#
# HOW IT WORKS:
# 1. Score each ticker based on:
#    - Position in title (earlier = more important) ‚Üí 50 points max
#    - First paragraph appearance ‚Üí 30 points max
#    - Frequency of mention ‚Üí 20 points max
#    Total possible score: 0-100
#
# 2. Select primary ticker(s):
#    - If top ticker's score exceeds 2nd by >30 points ‚Üí single-ticker story
#    - If scores are close (within 30 points) ‚Üí true multi-ticker story (both primary)
#    - If ticker score <40 ‚Üí barely mentioned (skip)
#
# 3. Alert behavior:
#    - Alert only primary ticker(s) (1-2 max)
#    - Display secondary tickers in alert: "Also mentions: MSFT, GOOGL"
#    - Track relevance score for debugging
#
# Enable smart multi-ticker scoring (1=enabled, 0=disabled)
# When disabled, falls back to legacy behavior (reject all multi-ticker articles)
# Default: 1 (enabled)
#FEATURE_MULTI_TICKER_SCORING=1

# Minimum relevance score (0-100) for a ticker to receive an alert
# Scores based on position (50 pts), first paragraph (30 pts), frequency (20 pts)
# - 80-100: Highly relevant (ticker is main subject)
# - 40-60: Moderately relevant (ticker is discussed)
# - <40: Barely mentioned (comparison/context only)
# Default: 40 (filter out incidental mentions)
#MULTI_TICKER_MIN_RELEVANCE_SCORE=40

# Maximum number of primary tickers to alert for a single article
# True multi-ticker stories (partnerships, acquisitions) can alert multiple tickers
# - 1: Strict single-ticker only (highest score wins)
# - 2: Allow true multi-ticker stories (recommended for partnerships)
# - 3+: More permissive (may allow sector commentary)
# Default: 2 (partnerships and acquisitions)
#MULTI_TICKER_MAX_PRIMARY=2

# Score difference threshold to determine single vs. multi-ticker classification
# If top ticker's score exceeds 2nd by more than this, only alert top ticker
# Example scenarios:
# - AAPL=85, MSFT=35 (diff=50) ‚Üí single-ticker story (AAPL only)
# - AAPL=75, GOOGL=70 (diff=5) ‚Üí multi-ticker story (both)
# Default: 30 points (significant gap required for single-ticker)
#MULTI_TICKER_SCORE_DIFF_THRESHOLD=30

# -----------------------------------------------------------------------------
# OPTIONAL: Market Data API Keys
# -----------------------------------------------------------------------------
# Provider Priority Strategy:
# - Price Data: Tiingo (PRIMARY) ‚Üí Alpha Vantage ‚Üí yfinance (fallback)
# - Sentiment: Finnhub (PRIMARY) ‚Üí Alpha Vantage (fallback)

# Alpha Vantage (25 calls/day free tier)
# Get from: https://www.alphavantage.co/support/#api-key
# Used for: Backup price data, backup sentiment
#ALPHAVANTAGE_API_KEY=YOUR_KEY_HERE

# Tiingo IEX API ($30/month starter plan - RECOMMENDED for historical analysis)
# Get from: https://api.tiingo.com/account/api/token
# Benefits:
#   - 20+ years of 15m/30m intraday historical data
#   - 1,000 requests/hour rate limit
#   - Real-time quotes with superior reliability
#   - Enables MOA 15m/30m flash catalyst analysis
# Enable with: FEATURE_TIINGO=1 (required for historical bootstrapper)
#TIINGO_API_KEY=YOUR_KEY_HERE
#FEATURE_TIINGO=1

# Finnhub (FREE tier: 60 calls/min)
# Get from: https://finnhub.io/dashboard
# Used for: Primary news sentiment, analyst ratings, earnings calendars
# No feature flag needed - auto-detected from API key presence
#FINNHUB_API_KEY=YOUR_KEY_HERE

# -----------------------------------------------------------------------------
# OPTIONAL: LLM Integration (Hybrid Router: Local ‚Üí Gemini ‚Üí Claude)
# -----------------------------------------------------------------------------
# Local Ollama LLM Server (requires Ollama running locally)
# LLM_ENDPOINT_URL: Full URL to Ollama API endpoint (must include /api/generate)
# LLM_MODEL_NAME: Name of the Ollama model to use (e.g., mistral, llama2)
#LLM_ENDPOINT_URL=http://localhost:11434/api/generate
#LLM_MODEL_NAME=mistral

# Gemini API Key (Primary LLM for SEC document analysis)
# Get from: https://aistudio.google.com/app/apikey
# Free tier: 1,500 requests/day (10 RPM limit)
# Tier 1 (with billing): 1,000 RPM (activates automatically with billing enabled)
# Used for: SEC keyword extraction, document analysis
#GEMINI_API_KEY=

# Anthropic Claude API (Automatic fallback when Gemini hits rate limits)
# Get from: https://console.anthropic.com/settings/keys
# Activates automatically during market bursts when Gemini quota exceeded
# Model: Claude 3 Haiku (cost-optimized for keyword extraction)
# Expected cost: ~$0.44/month for typical 5% fallback traffic
# Requires: Payment method (only charges for actual usage)
#ANTHROPIC_API_KEY=

# LLM Stability Settings (Wave 0.2)
# Smart batching to prevent GPU/API overload
#LLM_BATCH_SIZE=5                  # Items per batch (default: 5)
#LLM_BATCH_DELAY_SEC=2.0           # Delay between batches (default: 2.0)
#LLM_MIN_PRESCALE_SCORE=0.20       # Pre-filter threshold (default: 0.20)

# Rate limiting configuration
#LLM_MIN_INTERVAL_SEC=3.0          # Min seconds between requests (default: 3.0)
#LLM_GEMINI_RPM=10                 # Gemini requests per minute (default: 10)
#LLM_GEMINI_RPH=600                # Gemini requests per hour (default: 600)
#LLM_GEMINI_RPD=1500               # Gemini requests per day (default: 1500)
#LLM_LOCAL_ENABLED=1               # Enable local Mistral (default: 1)
#LLM_LOCAL_MAX_LENGTH=1000         # Max article length for local (default: 1000)

# GPU memory management
#GPU_CLEANUP_INTERVAL_SEC=300      # Cleanup interval in seconds (default: 300)

# LLM usage monitoring
#LLM_COST_ALERT_DAILY=5.00         # Daily cost alert threshold (default: $5.00)
#LLM_COST_ALERT_MONTHLY=50.00      # Monthly cost alert threshold (default: $50.00)
#LLM_USAGE_LOG_PATH=data/logs/llm_usage.jsonl

# -----------------------------------------------------------------------------
# WAVE ALPHA: LLM Cost Optimization Patch (4 Agents)
# -----------------------------------------------------------------------------
# Reduces LLM API costs by 60-80% through intelligent routing and caching

# Agent 1: Flash-Lite Integration (73% cheaper than Flash)
# Routes simple operations (<500 chars, basic classification) to gemini-2.0-flash-lite
# Pricing: $0.02/1M input tokens vs $0.075/1M for Flash
FEATURE_FLASH_LITE=1
LLM_FLASH_LITE_THRESHOLD=0.3      # Complexity threshold for flash-lite (0.0-1.0)

# Agent 2: SEC LLM Caching (72-hour cache for duplicate filings)
# Avoids re-analyzing the same SEC filing multiple times
# Cache persists in SQLite database (data/sec_llm_cache.db)
FEATURE_SEC_LLM_CACHE=1
SEC_LLM_CACHE_TTL_HOURS=72        # Cache time-to-live in hours

# Agent 3: Batch Classification (5-10x cost reduction)
# Groups 5-10 items into single API call instead of individual calls
# Example: 10 items = 1 API call instead of 10
FEATURE_LLM_BATCH=1
#LLM_BATCH_SIZE=5                  # Items per batch (already defined above)
#LLM_BATCH_TIMEOUT=2.0             # Max seconds to wait for batch to fill

# Agent 4: Cost Monitoring Alerts (multi-tier safety thresholds)
# Automatically disables expensive models when thresholds exceeded
# WARN: Log warning, no action
# CRIT: Disable Pro model, use Flash only
# EMERGENCY: Disable Pro + Anthropic, use Flash-Lite only
LLM_COST_ALERT_WARN=5.0           # Daily warning threshold (USD)
LLM_COST_ALERT_CRIT=10.0          # Daily critical threshold (USD)
LLM_COST_ALERT_EMERGENCY=20.0     # Daily emergency threshold (USD)

# -----------------------------------------------------------------------------
# Multi-Source Sentiment Aggregation (Wave 0.1+)
# -----------------------------------------------------------------------------
# Weights for combining sentiment from multiple sources
# Sources: Earnings data, ML models (FinBERT), VADER, LLM analysis
# Weights should sum to ~1.0 for optimal balance
# Confidence multipliers are applied internally based on source reliability

# Earnings sentiment weight (highest priority - hard financial data)
# Default: 0.35 (35%)
#SENTIMENT_WEIGHT_EARNINGS=0.35

# ML model sentiment weight (FinBERT/DistilBERT - trained on financial text)
# Default: 0.25 (25%)
#SENTIMENT_WEIGHT_ML=0.25

# VADER sentiment weight (rule-based lexicon analysis)
# Default: 0.25 (25%)
#SENTIMENT_WEIGHT_VADER=0.25

# LLM sentiment weight (Mistral via Ollama - general language understanding)
# Default: 0.15 (15%)
#SENTIMENT_WEIGHT_LLM=0.15

# -----------------------------------------------------------------------------
# External News & Social Sentiment Integration (High ROI Enhancement)
# -----------------------------------------------------------------------------
# Integrates sentiment from news aggregators, social media, and analyst ratings
# to provide multi-dimensional sentiment signals beyond core text analysis.
# Research shows social divergence and analyst consensus improve prediction accuracy.
#
# These sources complement the core sentiment (VADER, ML, LLM, Earnings) with:
# - Institutional signals (analyst ratings, news sentiment)
# - Retail signals (StockTwits, Reddit community sentiment)
# - Multi-source validation (reduces false signals)

# Enable news sentiment aggregation (Finnhub, Alpha Vantage, Marketaux, etc.)
# Aggregates sentiment from multiple news API providers
# Default: 1 (enabled if API keys available)
#FEATURE_NEWS_SENTIMENT=1

# Enable StockTwits social sentiment
# Aggregates bullish/bearish tags from StockTwits investor community
# Free tier: 200 calls/hour (unauthenticated), 400 calls/hour (with API key)
# Get API key from: https://api.stocktwits.com/developers/docs
# Default: 0 (disabled) - Set to 1 to enable
#FEATURE_STOCKTWITS_SENTIMENT=0

# StockTwits API key (optional - can use unauthenticated for 200/hr)
# Format: Your API access token from StockTwits developer dashboard
# Leave empty to use unauthenticated access (lower rate limit)
#STOCKTWITS_API_KEY=

# Enable Reddit social sentiment
# Searches r/wallstreetbets, r/stocks, r/pennystocks, r/StockMarket
# Applies VADER sentiment analysis to posts and top comments
# Free tier: 60 requests/minute
# Requires: Reddit app registration (https://www.reddit.com/prefs/apps)
# Default: 0 (disabled) - Set to 1 to enable
#FEATURE_REDDIT_SENTIMENT=0

# Reddit API credentials (required for Reddit sentiment)
# Format: "client_id:client_secret:user_agent"
# Example: "abc123:def456:my_bot_v1.0"
# Get from: https://www.reddit.com/prefs/apps (create "script" app)
#REDDIT_API_KEY=

# Enable analyst ratings sentiment (institutional signal)
# Uses Finnhub analyst recommendations endpoint
# Aggregates buy/sell ratings and detects recent upgrades/downgrades
# Free tier: 60 calls/minute (requires Finnhub API key)
# Default: 0 (disabled) - Set to 1 to enable
#FEATURE_ANALYST_SENTIMENT=0

# External Sentiment Weights (applied when sources are available)
# These are additive to core weights - total can exceed 1.0 (normalized automatically)

# News sentiment weight (Finnhub, Alpha Vantage, Marketaux aggregation)
# Default: 0.10 (10%)
#SENTIMENT_WEIGHT_NEWS=0.10

# StockTwits sentiment weight (retail community sentiment)
# Default: 0.10 (10%)
#SENTIMENT_WEIGHT_STOCKTWITS=0.10

# Reddit sentiment weight (social media retail sentiment)
# Default: 0.10 (10%)
#SENTIMENT_WEIGHT_REDDIT=0.10

# Analyst ratings sentiment weight (institutional consensus)
# Default: 0.10 (10%)
#SENTIMENT_WEIGHT_ANALYST=0.10

# -----------------------------------------------------------------------------
# OPTIONAL: FinViz Elite Integration (Fundamental Data)
# -----------------------------------------------------------------------------
# FinViz Elite provides float shares and short interest data
# Get from: https://finviz.com/elite.ashx (subscription required)
# Used for: Float shares (4.2x volatility predictor) and short interest (squeeze potential)
# Note: This is a session cookie, not an API key. Extract from browser after login.
#FINVIZ_API_KEY=your_finviz_elite_cookie_here

# Enable fundamental scoring (requires FinViz Elite)
# Float shares: <10M = +0.5 boost, 10-50M = +0.3 boost
# Short interest: >20% = +0.5 boost, 15-20% = +0.3 boost
#FEATURE_FUNDAMENTAL_SCORING=1

# -----------------------------------------------------------------------------
# Market Hours Detection (Wave 0.0 Phase 2)
# -----------------------------------------------------------------------------
# Enable adaptive cycling and feature gating based on market status
# When enabled, the bot adjusts behavior for open/extended/closed market periods
# Default: 0 (disabled) - Set to 1 to enable market-aware operation
#FEATURE_MARKET_HOURS_DETECTION=0

# Cycle times for different market periods (seconds)
# These control how frequently the bot checks for new news/events

# Market open cycle (9:30 AM - 4:00 PM ET)
# Default: 60 seconds (1 minute) - Fastest checks during active trading
#MARKET_OPEN_CYCLE_SEC=60

# Extended hours cycle (4:00-9:30 AM pre-market, 4:00-8:00 PM after-hours ET)
# Default: 90 seconds (1.5 minutes) - Moderate activity periods
#EXTENDED_HOURS_CYCLE_SEC=90

# Market closed cycle (8:00 PM - 4:00 AM ET, weekends, holidays)
# Default: 180 seconds (3 minutes) - Slowest checks when market is closed
#MARKET_CLOSED_CYCLE_SEC=180

# Pre-open warmup period (hours before market open)
# Features are gradually enabled during this period
# Default: 2 hours - Starts warming up at 7:30 AM ET (2h before 9:30 AM open)
#PREOPEN_WARMUP_HOURS=2

# Feature toggles for market closed periods
# When set to 1, the corresponding feature is DISABLED during market closed hours
# This saves resources and API quota when catalysts have minimal market impact

# Disable LLM analysis when market is closed
# Default: 1 (disabled during closed hours)
#CLOSED_DISABLE_LLM=1

# Disable chart generation when market is closed
# Default: 1 (disabled during closed hours)
#CLOSED_DISABLE_CHARTS=1

# Disable breakout scanner when market is closed
# Default: 1 (disabled during closed hours)
#CLOSED_DISABLE_BREAKOUT=1

# -----------------------------------------------------------------------------
# Market Regime Classification (VIX/Market Volatility)
# -----------------------------------------------------------------------------
# Enable VIX-based market regime classification. When enabled, the bot will
# classify market conditions and adjust catalyst score multipliers accordingly.
# This reduces false signals during volatile periods and boosts confidence
# during calm bull markets. Defaults to 0 (disabled).
#FEATURE_MARKET_REGIME=1

# Market Regime Multipliers (optional overrides)
# Controls how catalyst scores are adjusted based on market volatility
# Default values are shown below - only set if you want to customize

# BULL_MARKET (VIX < 15): Calm market, high confidence
# Default: 1.2 (20% boost to catalyst scores)
#REGIME_MULTIPLIER_BULL=1.2

# NEUTRAL (VIX 15-20): Normal volatility
# Default: 1.0 (no adjustment)
#REGIME_MULTIPLIER_NEUTRAL=1.0

# HIGH_VOLATILITY (VIX 20-30): Elevated volatility
# Default: 0.8 (20% reduction - more false signals expected)
#REGIME_MULTIPLIER_HIGH_VOL=0.8

# BEAR_MARKET (VIX 30-40): High volatility, bearish sentiment
# Default: 0.7 (30% reduction)
#REGIME_MULTIPLIER_BEAR=0.7

# CRASH (VIX >= 40): Extreme volatility, market panic
# Default: 0.5 (50% reduction - catalysts unreliable during crashes)
#REGIME_MULTIPLIER_CRASH=0.5

# -----------------------------------------------------------------------------
# RVol (Relative Volume) Scoring - Quick Win #4
# -----------------------------------------------------------------------------
# Enable RVol (Relative Volume) calculation and scoring boost.
# RVol measures current volume vs 20-day average (extrapolated for time-of-day).
# Identifies unusual volume spikes BEFORE price moves - strongest predictor.
# Default: 0 (disabled) - Set to 1 to enable RVol scoring
#FEATURE_RVOL=1

# Number of days for baseline volume calculation
# RVol = estimated_full_day_volume / avg_volume_{baseline_days}
# Default: 20 days
#RVOL_BASELINE_DAYS=20

# Cache TTL in minutes for intraday RVol data
# Prevents excessive API calls while keeping data fresh
# Default: 5 minutes
#RVOL_CACHE_TTL_MINUTES=5

# Minimum average volume (shares/day) required for RVol calculation
# Tickers below this threshold skip RVol to avoid false signals on illiquid stocks
# Default: 100,000 shares/day
#RVOL_MIN_AVG_VOLUME=100000

# RVol Classification Thresholds & Multipliers (built-in defaults):
# - EXTREME (‚â•5.0x):   1.4x multiplier (üöÄ Massive volume spike)
# - HIGH (3.0-5.0x):   1.3x multiplier (üî• Strong interest)
# - ELEVATED (2.0-3.0x): 1.2x multiplier (üìà Above average)
# - NORMAL (1.0-2.0x):  1.0x multiplier (‚û°Ô∏è  Baseline)
# - LOW (<1.0x):       0.8x multiplier (üìâ Below average)

# -----------------------------------------------------------------------------
# Volume-Price Divergence Detection (Technical Analysis Signal)
# -----------------------------------------------------------------------------
# Detects divergence patterns between price movement and volume to identify:
# - Weak rallies (price up, volume down) ‚Üí bearish signal (lack of conviction)
# - Strong selloff reversals (price down, volume down) ‚Üí bullish signal
#   (capitulation)
# - Confirmed rallies (price up, volume up) ‚Üí bullish confirmation
# - Confirmed selloffs (price down, volume up) ‚Üí bearish confirmation
#
# Classic technical analysis signal that filters false breakouts and identifies
# potential reversal points. Volume confirms price moves - when they diverge,
# it signals lack of conviction and potential reversal.
#
# Key Technical Insights:
# - Price rising on declining volume = weak hands buying, likely reversal
#   (bearish)
# - Price falling on low volume = capitulation/exhaustion, potential bottom
#   (bullish)
# - Price rising on high volume = confirmed rally, strong momentum (bullish)
# - Price falling on high volume = confirmed selloff, breakdown (bearish)
#
# Detection Thresholds:
# - Minimum price move: 2% (configurable via MIN_PRICE_MOVE_PCT)
# - Minimum volume change: 30% vs 20-day average (configurable via
#   MIN_VOLUME_MOVE_PCT)
#
# Signal Strength Tiers:
# - STRONG: Price >5% AND Volume >50% ‚Üí Max sentiment adjustment
# - MODERATE: Price >3% AND Volume >40% ‚Üí Mid-range adjustment
# - WEAK: Price >2% AND Volume >30% ‚Üí Base adjustment
#
# Sentiment Adjustments Applied:
# - WEAK_RALLY (bearish): -0.10 to -0.15 adjustment
# - STRONG_SELLOFF_REVERSAL (bullish): +0.08 to +0.12 adjustment
# - CONFIRMED_RALLY (bullish): +0.10 to +0.15 adjustment
# - CONFIRMED_SELLOFF (bearish): -0.10 to -0.15 adjustment
#
# Data Sources:
# - Price change: Current price vs previous day close
# - Volume change: RVol calculation (relative volume vs 20-day average)
# - No external API calls required (uses existing RVol infrastructure)
#
# Example Scenarios:
# - AAPL rises +5% but volume drops -40% ‚Üí WEAK_RALLY (-0.12 adjustment)
# - TSLA drops -6% on low volume (-55%) ‚Üí STRONG_SELLOFF_REVERSAL
#   (+0.12 adjustment)
# - NVDA rallies +7% on +120% volume ‚Üí CONFIRMED_RALLY (+0.15 adjustment)
# - AMD drops -5% on +70% volume ‚Üí CONFIRMED_SELLOFF (-0.15 adjustment)
#
# Requirements:
# - RVol feature must be enabled (FEATURE_RVOL=1)
# - Only applies to liquid stocks (avg volume >100k shares/day)
#
# Default: 1 (enabled)
#FEATURE_VOLUME_PRICE_DIVERGENCE=1

# Volume-price divergence sentiment weight (technical confirmation signal)
# Lower weight since this is a confirmation signal, not a primary catalyst
# detector
# Default: 0.08 (8%)
#SENTIMENT_WEIGHT_DIVERGENCE=0.08

# Minimum price change percentage for divergence detection
# Only triggers divergence detection if price moves by at least this amount
# Default: 0.02 (2%)
#MIN_PRICE_MOVE_PCT=0.02

# Minimum volume change percentage for divergence detection
# Only triggers divergence detection if volume changes by at least this amount
# Default: 0.30 (30% above or below 20-day average)
#MIN_VOLUME_MOVE_PCT=0.30

# -----------------------------------------------------------------------------
# Google Trends Integration (Retail Search Volume Indicator)
# -----------------------------------------------------------------------------
# Enable Google Trends sentiment based on search volume spikes.
# Research shows retail search volume spikes 12-48 hours before price moves.
# Uses pytrends library (free, no API key required).
#
# SEARCH VOLUME TO SENTIMENT MAPPING:
# - spike_ratio > 20: +0.8 sentiment (extreme hype - caution warranted)
# - spike_ratio > 10: +0.6 sentiment (viral attention)
# - spike_ratio > 5: +0.4 sentiment (significant retail interest)
# - spike_ratio > 3: +0.2 sentiment (moderate interest)
# - spike_ratio > 2: +0.1 sentiment (slight increase)
# - declining/stable: 0.0 sentiment (lack of interest ‚â† negative)
#
# RATE LIMITING:
# - Google Trends has strict rate limits (429 errors common)
# - Results cached for 4 hours to minimize API calls
# - Exponential backoff on failures
# - Graceful degradation on errors (won't crash pipeline)
#
# EDGE CASES:
# - OTC/penny stocks: Adds "stock" to query for disambiguation
# - Common word tickers (A, PLAY): Adds "stock" suffix
# - Low search volume: Returns None (not all tickers are searched)
#
# Requirements: pip install pytrends>=4.9.0
# Default: 0 (disabled) - Set to 1 to enable
#FEATURE_GOOGLE_TRENDS=1

# Google Trends sentiment weight (retail search volume indicator)
# Default: 0.08 (8%)
#SENTIMENT_WEIGHT_GOOGLE_TRENDS=0.08

# -----------------------------------------------------------------------------
# Short Interest Sentiment (Squeeze Potential Amplifier)
# -----------------------------------------------------------------------------
# Amplifies bullish sentiment when short interest is high (squeeze potential).
# Only boosts positive sentiment - high SI + bullish catalyst = higher score.
# This detects potential short squeeze scenarios by combining high short interest
# with positive catalysts, amplifying the sentiment score when both conditions align.
#
# Multiplier Logic (requires BOTH high SI AND bullish sentiment):
# - SI > 40% AND sentiment > 0.7: 1.7x boost (70% amplification)
# - SI > 30% AND sentiment > 0.6: 1.5x boost (50% amplification)
# - SI > 20% AND sentiment > 0.5: 1.3x boost (30% amplification)
# - Otherwise: 1.0x (no boost)
#
# Example: Base sentiment of +0.6 with SI=35% ‚Üí boosted to +0.9
#
# Data Source: FinViz scraping (via existing float_data.py module)
# Cache: 24 hours (short interest data updates weekly)
# Graceful degradation: No penalty if data unavailable
# Default: 1 (enabled)
#FEATURE_SHORT_INTEREST_BOOST=1

# Short interest sentiment weight (conditional boost applied to base sentiment)
# This is the weight given to the SI boost component in the final aggregation
# Default: 0.08 (8%)
#SENTIMENT_WEIGHT_SHORT_INTEREST=0.08

# -----------------------------------------------------------------------------
# Pre-Market Price Action Sentiment (Leading Indicator)
# -----------------------------------------------------------------------------
# Analyzes pre-market price movements (4am-10am ET) as a leading indicator.
# Pre-market action reflects institutional positioning before retail trading begins,
# providing early signals of market sentiment and potential intraday moves.
#
# Active Window:
# - Pre-market hours: 4:00-9:30 AM ET (institutional trading)
# - Early trading: 9:30-10:00 AM ET (continuation patterns)
# - Outside this window: Sentiment returns 0.0 (inactive)
#
# Sentiment Mapping (piecewise linear from price change):
# - +15% or more: +0.9 sentiment (extreme bullish surge)
# - +10% to +15%: +0.7 to +0.9 (very strong rally)
# - +5% to +10%: +0.5 to +0.7 (strong rally)
# - +2% to +5%: +0.2 to +0.5 (moderate strength)
# - 0% to +2%: 0.0 to +0.2 (slight gains)
# - Mirrors for negative moves (e.g., -15% = -0.9)
#
# Example: Pre-market up +8% ‚Üí sentiment = +0.6
#
# Data Source: Tiingo or Alpha Vantage (existing infrastructure)
# Fallback: Uses previous close if pre-market data unavailable
# Default: 1 (enabled)
#FEATURE_PREMARKET_SENTIMENT=1

# Pre-market sentiment weight (leading price indicator)
# Higher weight reflects strong predictive value of institutional positioning
# Default: 0.15 (15%)
#SENTIMENT_WEIGHT_PREMARKET=0.15

# -----------------------------------------------------------------------------
# After-Market Price Action Sentiment (Earnings & News Signal)
# -----------------------------------------------------------------------------
# Analyzes after-market price movements (4pm-8pm ET) as a sentiment signal.
# After-market action captures earnings releases and material news that drops
# after market close, providing early signals for next-day trading momentum.
#
# Active Window:
# - After-market hours: 4:00-8:00 PM ET (earnings and news reaction)
# - Early pre-market: 4:00-4:30 AM ET (next morning continuation)
# - Outside this window: Sentiment returns 0.0 (inactive)
#
# Sentiment Mapping (piecewise linear from price change):
# - +15% or more: +0.9 sentiment (extreme bullish surge)
# - +10% to +15%: +0.7 to +0.9 (very strong rally)
# - +5% to +10%: +0.5 to +0.7 (strong rally)
# - +2% to +5%: +0.2 to +0.5 (moderate strength)
# - 0% to +2%: 0.0 to +0.2 (slight gains)
# - Mirrors for negative moves (e.g., -15% = -0.9)
#
# Example: After-market down -12% (earnings miss) ‚Üí sentiment = -0.8
#
# Use Case: Captures post-earnings moves that often predict next-day gaps
# Data Source: Tiingo or Alpha Vantage (existing infrastructure)
# Fallback: Uses previous close if after-market data unavailable
# Default: 1 (enabled)
#FEATURE_AFTERMARKET_SENTIMENT=1

# After-market sentiment weight (earnings and news signal)
# Equal weight to pre-market reflects similar predictive value
# Default: 0.15 (15%)
#SENTIMENT_WEIGHT_AFTERMARKET=0.15

# -----------------------------------------------------------------------------
# Insider Trading Sentiment (SEC Form 4 Analysis)
# -----------------------------------------------------------------------------
# Analyzes SEC Form 4 filings (insider buying/selling) to generate sentiment
# signals. Insider buying by executives (especially CEO/CFO) is one of the
# strongest bullish indicators in equity markets.
#
# Research shows insider buying predicts positive returns 8-12% higher than
# market average over the following 6-12 months. CEO/CFO buying is the
# strongest signal (they have the most information about company prospects).
#
# Data Source: SEC EDGAR API (FREE, no key required)
# API Endpoint: https://data.sec.gov/submissions/CIK{cik}.json
# Lookback Period: 30 days of recent Form 4 filings
# Cache: 24 hours (Form 4s don't change after filing)
# Rate Limit: 10 requests/second (SEC requirement)
#
# Sentiment Scoring Logic:
# - Large insider buying (>$500k by CEO/CFO): +0.6 to +0.8 sentiment
# - Moderate buying ($100k-$500k): +0.3 to +0.5 sentiment
# - Small buying (<$100k): +0.1 to +0.2 sentiment
# - Routine selling (10b5-1 automatic plans): 0.0 sentiment (neutral, filtered
#   out)
# - Suspicious selling (large, not 10b5-1): -0.2 to -0.4 sentiment
#
# Role Weighting (insider importance):
# - CEO/CFO: 1.0x (highest confidence, 20% boost applied)
# - President: 0.9x
# - Directors: 0.7x
# - Officers/VPs: 0.5x
# - 10% Owners: 0.6x
#
# Example Scenarios:
# - CEO buys $2M of stock ‚Üí +0.80 sentiment (STRONG_BUY signal)
# - CFO buys $250k ‚Üí +0.45 sentiment (BUY signal)
# - Director sells $1M via 10b5-1 plan ‚Üí 0.0 sentiment (filtered, automatic)
# - CEO sells $1.5M without 10b5-1 ‚Üí -0.40 sentiment (SELL signal, unusual)
#
# Requirements:
# - LLM (Gemini/Claude) for Form 4 XML parsing (falls back to regex if
#   unavailable)
# - SEC User-Agent header configured (uses SEC_MONITOR_USER_EMAIL from config)
#
# Default: 1 (enabled)
#FEATURE_INSIDER_SENTIMENT=1

# Insider trading sentiment weight (SEC Form 4 analysis)
# High weight reflects strong predictive value of insider actions
# Combined with 0.85 confidence multiplier = significant influence
# Default: 0.12 (12%)
#SENTIMENT_WEIGHT_INSIDER=0.12

# -----------------------------------------------------------------------------
# News Velocity Sentiment (Article Momentum Indicator)
# -----------------------------------------------------------------------------
# Tracks article publication rate to detect breaking news and viral catalysts.
# Sudden spikes in article count indicate major developments, correlating with
# significant price movements. Sustained high velocity suggests ongoing attention.
#
# Velocity Thresholds (1-hour rolling window):
# - >50 articles/hr: +0.7 sentiment (extreme attention - potential pump)
# - >20 articles/hr: +0.5 sentiment (viral catalyst - mainstream coverage)
# - >10 articles/hr: +0.3 sentiment (high media attention)
# - <10 articles/hr: Linear scaling from 0.0 to +0.3
#
# Sustained Coverage Bonus:
# - If 4-hour velocity > 3x baseline: additional +0.2 sentiment boost
# - Detects ongoing stories vs one-time spikes
#
# Article Deduplication:
# - MD5 hash of article titles to prevent duplicate counting
# - Different sources covering same story = 1 article
#
# Storage: SQLite database (data/news_velocity.db)
# - Tracks article timestamps, titles, sources per ticker
# - Retention: 7 days (automatic cleanup of old data)
# - Indexed for fast velocity queries
#
# Example: 35 articles in last hour ‚Üí sentiment = +0.5
#
# Default: 1 (enabled)
#FEATURE_NEWS_VELOCITY=1

# News velocity sentiment weight (media attention indicator)
# Lower weight since velocity measures attention, not sentiment direction
# Default: 0.05 (5%)
#SENTIMENT_WEIGHT_NEWS_VELOCITY=0.05

# -----------------------------------------------------------------------------
# Semantic Keyword Extraction (KeyBERT)
# -----------------------------------------------------------------------------
# Enable semantic keyword extraction using KeyBERT for context-aware keyphrases.
# KeyBERT uses BERT embeddings to extract multi-word phrases that capture
# domain-specific concepts (e.g., "fda approval", "merger acquisition").
# This supplements traditional keyword matching with ML-powered semantic understanding.
# Requires: keybert package (optional - gracefully degrades if unavailable)
# Default: 1 (enabled)
#FEATURE_SEMANTIC_KEYWORDS=1

# Number of semantic keywords to extract per news item
# Higher values provide more context but may include less relevant phrases
# Default: 5 keywords
#SEMANTIC_KEYWORDS_TOP_N=5

# Maximum n-gram size for multi-word phrases
# 1 = single words only (unigrams)
# 2 = up to 2-word phrases (bigrams)
# 3 = up to 3-word phrases (trigrams) - RECOMMENDED
# Default: 3 (unigrams, bigrams, trigrams)
#SEMANTIC_KEYWORDS_NGRAM_MAX=3

# -----------------------------------------------------------------------------
# MOA (Missed Opportunities Analyzer) - Nightly Scheduler
# -----------------------------------------------------------------------------
# Automatic nightly analysis to identify rejected catalysts that became profitable
# and generate keyword weight recommendations. Runs both MOA and False Positive
# analyzers in background thread to avoid blocking main loop.
#
# Default: Enabled, runs at 2 AM UTC

# Enable nightly MOA scheduler
# Set to 0 to disable automatic analysis (can still run manually)
# Default: 1 (enabled)
#MOA_NIGHTLY_ENABLED=1

# Hour (UTC) to run nightly MOA analysis
# Valid range: 0-23 (0 = midnight UTC, 13 = 1 PM UTC = 8 AM Central, 14 = 2 PM UTC)
# Runs once per day during this hour; duplicate runs prevented automatically
# Note: Triggers anytime during the specified hour (hour precision only)
# Default: 13 (1 PM UTC = 8 AM Central Time)
#MOA_NIGHTLY_HOUR=13

# Enable human-in-the-loop review for MOA keyword recommendations
# When enabled, nightly MOA creates a Discord review request instead of auto-applying
# Admin can approve/reject keywords individually or in bulk via interactive buttons
# Reviews auto-apply after timeout if no action taken (see MOA_REVIEW_TIMEOUT_HOURS)
# When disabled, uses legacy auto-apply behavior (confidence >= 0.6)
# Default: 0 (OFF - legacy behavior)
#MOA_REVIEW_ENABLED=0

# Hours before pending MOA review auto-applies if admin doesn't respond
# After this timeout, all pending keywords are automatically approved and applied
# Prevents MOA from stalling if admin is unavailable
# Default: 48 (auto-apply after 2 days)
#MOA_REVIEW_TIMEOUT_HOURS=48

# Discord channel ID for MOA review requests
# If not set, uses DISCORD_ADMIN_CHANNEL_ID
# Set this to send MOA reviews to a dedicated channel
# Example: MOA_REVIEW_CHANNEL_ID=123456789012345678
#MOA_REVIEW_CHANNEL_ID=

# -----------------------------------------------------------------------------
# Feedback Loop - Alert Performance Tracking
# -----------------------------------------------------------------------------
# CRITICAL FEATURE: Tracks actual outcomes of sent alerts (not just missed opportunities)
# Enables bi-directional weight adjustments:
#   - MOA: Boosts weights for missed opportunities (keywords we rejected but should accept)
#   - Feedback Loop: Penalizes weights for false positives (keywords we accepted but failed)
#
# When enabled, the system:
# 1. Logs all sent alerts to database with keywords, scores, sentiment
# 2. Tracks price/volume changes at 15m, 1h, 4h, 1d intervals
# 3. Classifies outcomes as WIN/LOSS/NEUTRAL
# 4. Generates keyword penalty recommendations for underperformers
# 5. Runs false positive analysis alongside MOA nightly run
#
# Example: "dilution" keyword causes 10 alerts with 80% failure rate
# ‚Üí Recommendation: Reduce "dilution" weight by -0.5 to -2.0
#
# Database: data/feedback/alert_performance.db
# Analysis: data/false_positives/analysis_report.json
# Default: 0 (OFF - must enable explicitly)
#
# IMPORTANT: This is a complete system (1,915 lines) ready to activate
# Expected impact: 20-30% reduction in false positives
#
#FEATURE_FEEDBACK_LOOP=0

# Interval (seconds) for price/volume tracking background task
# The tracker queries current prices for all active alerts and updates database
# Lower values = more API calls but more accurate tracking
# Default: 900 (15 minutes)
#FEEDBACK_TRACKING_INTERVAL=900

# -----------------------------------------------------------------------------
# WAVE 3: Float Data Robustness
# -----------------------------------------------------------------------------
# Multi-source float data with caching and validation. Float (shares available
# for trading) is a key volatility predictor: <5M float = 4.2x higher volatility.
# Data sources: FinViz (primary) -> yfinance -> Tiingo (cascading fallback).

# Enable float data collection (default: enabled)
# Set to 0 to disable float data fetching entirely
#FEATURE_FLOAT_DATA=1

# Enable float data caching (default: enabled)
# Caches float values to reduce API calls and improve reliability
# Float changes infrequently (quarterly filings), so caching is safe
#FLOAT_DATA_ENABLE_CACHE=1

# Cache maximum age in hours (default: 24 hours)
# How long cached float data remains valid before re-fetching
# Increase to 168 (1 week) or 720 (30 days) to reduce API usage
#FLOAT_CACHE_MAX_AGE_HOURS=24

# Float data sources priority order (default: finviz,yfinance,tiingo)
# Bot tries each source in order until valid data is found
# Available: finviz, yfinance, tiingo
#FLOAT_DATA_SOURCES=finviz,yfinance,tiingo

# FinViz request delay in seconds (default: 2.0)
# Rate limiting delay between FinViz scraping attempts
#FLOAT_REQUEST_DELAY_SEC=2.0

# Data Validation Thresholds (built-in, not configurable):
# - Minimum valid float: 1,000 shares (rejects obviously wrong data)
# - Maximum valid float: 100B shares (rejects impossibly large values)
# Invalid values are logged and rejected, triggering fallback sources

# -----------------------------------------------------------------------------
# SEC Filing Analysis (Waves 1-4)
# -----------------------------------------------------------------------------
# SEC streaming and LLM analysis for real-time filing monitoring

# Enable SEC filing integration into main feed pipeline (Wave 1)
# Fetches recent SEC filings for watchlist tickers and includes them in feed processing
# Requires SEC_MONITOR_USER_EMAIL to be set (SEC EDGAR API requirement)
# Default: 0 (disabled) - Set to 1 to enable SEC filing feed integration
#FEATURE_SEC_FILINGS=0

# SEC monitor email (REQUIRED for SEC EDGAR API access)
# SEC EDGAR API requires a User-Agent with valid email per their guidelines
# Format: your-email@example.com
#SEC_MONITOR_USER_EMAIL=your-email@example.com

# SEC Streaming API (Wave 3A - Real-time filings via WebSocket)
# Get API key from: https://sec-api.io
# Free tier: 10 requests/day | Starter tier ($30/mo): Real-time WebSocket stream
# Benefits:
#   - Instant filing notifications via WebSocket (no RSS polling lag)
#   - Market cap filtering for penny stocks (<$5B)
#   - Automatic reconnection with exponential backoff
#   - Graceful fallback to RSS polling on failure
#SEC_API_KEY=your_sec_api_key_here
#SEC_STREAM_ENABLED=true
#SEC_STREAM_MARKET_CAP_MAX=5000000000  # $5B max for penny stocks
#SEC_STREAM_RECONNECT_DELAY=5  # seconds

# LLM Tiering Strategy (Wave 3B - Cost optimization)
# Routes SEC filing analysis to Gemini Flash (cheap) vs Gemini Pro (deep) based on complexity
# Strategies:
#   - auto: Complexity scoring determines model (Flash for simple, Pro for complex)
#   - flash: Always use Flash (cheapest, fastest)
#   - pro: Always use Pro (most accurate)
#   - adaptive: Start with Flash, upgrade to Pro if confidence < 0.6
#LLM_TIER_STRATEGY=auto  # auto, flash, pro, adaptive
#LLM_COMPLEXITY_THRESHOLD=0.7  # Pro threshold for auto mode
#LLM_COST_TRACKING=true  # Log per-call costs

# SEC Sentiment Weighting (Wave 2C - LLM-powered sentiment scoring)
# Weight for SEC LLM sentiment in multi-source aggregation
# This becomes the 7th sentiment source in the system
# Default: 0.10 (10%)
#SENTIMENT_WEIGHT_SEC_LLM=0.10

# RAG System (Wave 4A - "Dig Deeper" interactive Q&A)
# Vector search for answering user questions about filings
#RAG_ENABLED=true
#RAG_VECTOR_DB=faiss  # faiss or chromadb
#RAG_INDEX_PATH=data/rag_index/
#RAG_MAX_CONTEXT_CHUNKS=3  # Chunks to retrieve for context
#RAG_ANSWER_MAX_TOKENS=150  # Max length of LLM answer

# Filing Prioritization (Wave 4B - Alert fatigue reduction)
# Scores filings by urgency √ó impact √ó relevance to reduce alert spam
#PRIORITY_ALERT_THRESHOLD=0.6  # Minimum score to trigger immediate alert
#PRIORITY_WATCHLIST_BOOST=0.3  # Bonus for watchlist tickers
#PRIORITY_DIGEST_ENABLED=true  # Send daily digest of medium-priority filings

# SEC Filing Alerts (Wave 4C - Enhanced Discord embeds)
# Rich embeds with priority badges, metrics, guidance, and interactive buttons
#SEC_FILING_ALERTS_ENABLED=true  # Enable SEC-specific alert formatting
#SEC_ALERT_MIN_PRIORITY=high  # Minimum priority tier for alerts (low, medium, high, critical)

# XBRL Caching (Wave 1C - Balance sheet extraction)
# Cache XBRL financial data to reduce API calls
#XBRL_CACHE_DIR=data/xbrl_cache/
#XBRL_CACHE_DAYS=90  # Days to cache XBRL data

# -----------------------------------------------------------------------------
# Async Enrichment Worker (Wave 2 - Fast Alert Architecture)
# -----------------------------------------------------------------------------
# Parallel market data enrichment for classified news items. After fast
# classification filters out low-relevance items, the enrichment worker fetches
# market data (RVOL, float, VWAP, divergence) in parallel batches.
#
# Architecture:
# - Main loop: Fast classification only (< 1s per item)
# - Background worker: Parallel enrichment of filtered items
# - Batch processing: Multiple tickers enriched simultaneously
# - Result caching: Enriched data retrieved asynchronously
#
# Performance Impact:
# - Before: Serial enrichment blocks classification (5-10s per item)
# - After: Classification completes immediately, enrichment in background
# - Batch size=10: Process 10 tickers in parallel vs serial
# - Expected speedup: 5-10x for high-volume news periods
#
# Configuration:

# Number of items to process in one enrichment batch
# Higher values = better parallelism but more concurrent API calls
# Recommended: 5-10 for typical API rate limits
# Default: 10
#ENRICHMENT_BATCH_SIZE=10

# Maximum time to wait for batch to fill before processing (seconds)
# Lower values = faster processing of single items
# Higher values = better batching efficiency
# Recommended: 1.0-3.0 for balance
# Default: 2.0
#ENRICHMENT_BATCH_TIMEOUT=2.0

# Number of worker threads for parallel API calls
# Higher values = faster parallel processing but more resource usage
# Recommended: 3-5 for typical systems
# Default: 5
#ENRICHMENT_WORKER_THREADS=5

# -----------------------------------------------------------------------------
# WAVE 3.2: Chart Data Gap Filling
# -----------------------------------------------------------------------------
# Automatically fill gaps in chart data during premarket/afterhours to create
# smooth visualizations without confusing gaps. Filled periods are visually
# distinguished with lighter colors and dashed lines.

# Enable gap filling for extended hours data
# When enabled, fills missing candles with last known price
# Default: 1 (enabled)
#CHART_FILL_EXTENDED_HOURS=1

# Gap filling method
# Options: forward_fill (recommended), interpolate (experimental), flat_line
# Default: forward_fill
#CHART_FILL_METHOD=forward_fill

# Show visual annotations for extended hours periods
# When enabled, adds background shading for premarket/afterhours zones
# Default: 1 (enabled)
#CHART_SHOW_EXTENDED_HOURS_ANNOTATION=1

# Fetch extended hours data from Tiingo (4am-8pm ET)
# Requires Tiingo API key and FEATURE_TIINGO=1
# Default: 1 (enabled if Tiingo available)
#CHART_FETCH_EXTENDED_HOURS=1

# -----------------------------------------------------------------------------
# Week 1 Critical Stability Fixes (2025-11-03)
# -----------------------------------------------------------------------------

# SQLite Performance Optimization
# Enable Write-Ahead Logging for better concurrency and performance
# 1=on, 0=off
# Default: 1 (enabled)
SQLITE_WAL_MODE=1

# SQLite synchronous mode: FULL=safest, NORMAL=balanced, OFF=fastest
# Default: NORMAL (good balance of safety and performance)
SQLITE_SYNCHRONOUS=NORMAL

# SQLite cache size in pages (10000 pages ~40MB with default page size)
# Negative value = KB, positive value = pages
# Default: 10000 pages
SQLITE_CACHE_SIZE=10000

# SQLite memory-mapped I/O size in bytes (30GB default)
# Larger values improve performance for read-heavy workloads
# Default: 30000000000 (30GB)
SQLITE_MMAP_SIZE=30000000000

# Network failure detection - Alert after N consecutive empty feed cycles
# When the feed fetching returns no items for this many consecutive cycles,
# an admin alert is sent to DISCORD_ADMIN_WEBHOOK to notify of potential
# feed outage or network connectivity issues.
# Default: 5 cycles
ALERT_CONSECUTIVE_EMPTY_CYCLES=5

# -----------------------------------------------------------------------------
# Advanced Settings (use defaults)
# -----------------------------------------------------------------------------
#FEATURE_ALERTS=1
#FEATURE_HEARTBEAT=1
#FEATURE_INDICATORS=1
#FEATURE_EARNINGS_ALERTS=1
